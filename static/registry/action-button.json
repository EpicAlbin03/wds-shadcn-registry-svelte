{
	"$schema": "https://shadcn-svelte.com/schema/registry-item.json",
	"name": "action-button",
	"type": "registry:ui",
	"devDependencies": [
		"svelte-sonner@^1.0.5"
	],
	"registryDependencies": [
		"button",
		"loading-swap",
		"alert-dialog"
	],
	"files": [
		{
			"content": "<script lang=\"ts\">\r\n\timport { Button, type ButtonProps } from '$lib/components/ui/button';\r\n\timport { toast } from 'svelte-sonner';\r\n\timport { LoadingSwap } from '$UI$/loading-swap';\r\n\timport * as Alert from '$lib/components/ui/alert-dialog';\r\n\r\n\texport type ActionButtonProps = {\r\n\t\taction: () => Promise<{ error: boolean; message?: string }>;\r\n\t\trequireAreYouSure?: boolean;\r\n\t\tareYouSureDescription?: string;\r\n\t} & Omit<ButtonProps, 'id'> & { id?: string };\r\n\r\n\tlet {\r\n\t\taction,\r\n\t\trequireAreYouSure = false,\r\n\t\tareYouSureDescription = 'This action cannot be undone.',\r\n\t\tchildren,\r\n\t\t...props\r\n\t}: ActionButtonProps = $props();\r\n\r\n\tlet isLoading = $state(false);\r\n\r\n\tasync function performAction() {\r\n\t\tisLoading = true;\r\n\t\tconst data = await action();\r\n\t\tisLoading = false;\r\n\t\tif (data.error) toast.error(data.message ?? 'Error');\r\n\t}\r\n</script>\r\n\r\n{#if requireAreYouSure}\r\n\t<Alert.Root open={isLoading}>\r\n\t\t<Alert.Trigger {...props}>\r\n\t\t\t{#snippet child({ props })}\r\n\t\t\t\t<Button {...props}>\r\n\t\t\t\t\t{@render children?.()}\r\n\t\t\t\t</Button>\r\n\t\t\t{/snippet}\r\n\t\t</Alert.Trigger>\r\n\t\t<Alert.Content>\r\n\t\t\t<Alert.Header>\r\n\t\t\t\t<Alert.Title>Are you sure?</Alert.Title>\r\n\t\t\t\t<Alert.Description>\r\n\t\t\t\t\t{@html areYouSureDescription}\r\n\t\t\t\t</Alert.Description>\r\n\t\t\t</Alert.Header>\r\n\t\t\t<Alert.Footer>\r\n\t\t\t\t<Alert.Cancel>Cancel</Alert.Cancel>\r\n\t\t\t\t<Alert.Action disabled={isLoading} onclick={performAction}>\r\n\t\t\t\t\t<LoadingSwap {isLoading}>Yes</LoadingSwap>\r\n\t\t\t\t</Alert.Action>\r\n\t\t\t</Alert.Footer>\r\n\t\t</Alert.Content>\r\n\t</Alert.Root>\r\n{:else}\r\n\t<Button\r\n\t\t{...props}\r\n\t\tdisabled={props.disabled ?? isLoading}\r\n\t\tonclick={(e: MouseEvent & { currentTarget: HTMLButtonElement | HTMLAnchorElement }) => {\r\n\t\t\tperformAction();\r\n\r\n\t\t\tif (e.currentTarget instanceof HTMLButtonElement) {\r\n\t\t\t\tprops.onclick?.(e as MouseEvent & { currentTarget: HTMLButtonElement });\r\n\t\t\t} else if (e.currentTarget instanceof HTMLAnchorElement) {\r\n\t\t\t\tprops.onclick?.(e as MouseEvent & { currentTarget: HTMLAnchorElement });\r\n\t\t\t}\r\n\t\t}}\r\n\t>\r\n\t\t<LoadingSwap {isLoading} class=\"inline-flex items-center gap-2\">\r\n\t\t\t{@render children?.()}\r\n\t\t</LoadingSwap>\r\n\t</Button>\r\n{/if}\r\n",
			"type": "registry:file",
			"target": "action-button/action-button.svelte"
		},
		{
			"content": "import Root, { type ActionButtonProps } from './action-button.svelte';\r\n\r\nexport {\r\n\tRoot,\r\n\ttype ActionButtonProps,\r\n\t//\r\n\tRoot as ActionButton,\r\n\ttype ActionButtonProps as Props\r\n};\r\n",
			"type": "registry:file",
			"target": "action-button/index.ts"
		}
	]
}