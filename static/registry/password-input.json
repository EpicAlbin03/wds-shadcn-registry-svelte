{
	"$schema": "https://shadcn-svelte.com/schema/registry-item.json",
	"name": "password-input",
	"type": "registry:ui",
	"devDependencies": [
		"@zxcvbn-ts/core@^3.0.4",
		"@lucide/svelte@^0.544.0"
	],
	"registryDependencies": [
		"utils",
		"tooltip",
		"input-group"
	],
	"files": [
		{
			"content": "import Root, { type PasswordInputProps } from './password-input.svelte';\r\n\r\nexport {\r\n\tRoot,\r\n\ttype PasswordInputProps,\r\n\t//\r\n\tRoot as PasswordInput,\r\n\ttype PasswordInputProps as Props\r\n};\r\n",
			"type": "registry:file",
			"target": "password-input/index.ts"
		},
		{
			"content": "<script lang=\"ts\">\r\n\timport { cn } from '$UTILS$';\r\n\timport { zxcvbn, zxcvbnOptions } from '@zxcvbn-ts/core';\r\n\timport * as Tooltip from '$lib/components/ui/tooltip';\r\n\timport { onMount } from 'svelte';\r\n\r\n\ttype Props = {\r\n\t\tpassword: string;\r\n\t};\r\n\r\n\tlet { password }: Props = $props();\r\n\r\n\tlet optionsLoaded = $state(false);\r\n\tlet errorLoadingOptions = $state(false);\r\n\r\n\tconst strengthResult = $derived.by(() => {\r\n\t\tif (!optionsLoaded || password.length === 0) {\r\n\t\t\treturn { score: 0, feedback: { warning: undefined } } as const;\r\n\t\t}\r\n\t\treturn zxcvbn(password);\r\n\t});\r\n\r\n\tonMount(() => {\r\n\t\tPromise.all([import('@zxcvbn-ts/language-common'), import('@zxcvbn-ts/language-en')])\r\n\t\t\t.then(([common, english]) => {\r\n\t\t\t\tzxcvbnOptions.setOptions({\r\n\t\t\t\t\ttranslations: english.translations,\r\n\t\t\t\t\tgraphs: common.adjacencyGraphs,\r\n\t\t\t\t\tmaxLength: 50,\r\n\t\t\t\t\tdictionary: {\r\n\t\t\t\t\t\t...common.dictionary,\r\n\t\t\t\t\t\t...english.dictionary\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\toptionsLoaded = true;\r\n\t\t\t})\r\n\t\t\t.catch(() => (errorLoadingOptions = true));\r\n\t});\r\n\r\n\tfunction getLabel() {\r\n\t\tif (password.length === 0) return 'Password strength';\r\n\t\tif (!optionsLoaded) return 'Loading strength checker';\r\n\r\n\t\tconst score = strengthResult.score;\r\n\t\tswitch (score) {\r\n\t\t\tcase 0:\r\n\t\t\tcase 1:\r\n\t\t\t\treturn 'Very weak';\r\n\t\t\tcase 2:\r\n\t\t\t\treturn 'Weak';\r\n\t\t\tcase 3:\r\n\t\t\t\treturn 'Strong';\r\n\t\t\tcase 4:\r\n\t\t\t\treturn 'Very strong';\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(`Invalid score: ${score satisfies never}`);\r\n\t\t}\r\n\t}\r\n\r\n\tconst label = getLabel();\r\n</script>\r\n\r\n{#if !errorLoadingOptions}\r\n\t<div class=\"space-y-0.5\">\r\n\t\t<div\r\n\t\t\trole=\"progressbar\"\r\n\t\t\taria-label=\"Password Strength\"\r\n\t\t\taria-valuenow={strengthResult.score}\r\n\t\t\taria-valuemin={0}\r\n\t\t\taria-valuemax={4}\r\n\t\t\taria-valuetext={label}\r\n\t\t\tclass=\"flex gap-1\"\r\n\t\t>\r\n\t\t\t{#each Array.from({ length: 4 }) as _, i (i)}\r\n\t\t\t\t{@const color = strengthResult.score >= 3 ? 'bg-primary' : 'bg-destructive'}\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass={cn('h-1 flex-1 rounded-full', strengthResult.score > i ? color : 'bg-secondary')}\r\n\t\t\t\t></div>\r\n\t\t\t{/each}\r\n\t\t</div>\r\n\t\t<div class=\"flex justify-end text-sm text-muted-foreground\">\r\n\t\t\t{#if strengthResult.feedback.warning == null}\r\n\t\t\t\t{label}\r\n\t\t\t{:else}\r\n\t\t\t\t<Tooltip.Root>\r\n\t\t\t\t\t<Tooltip.Trigger class=\"underline underline-offset-1\">\r\n\t\t\t\t\t\t{label}\r\n\t\t\t\t\t</Tooltip.Trigger>\r\n\t\t\t\t\t<Tooltip.Content side=\"bottom\" sideOffset={4} class=\"text-base\">\r\n\t\t\t\t\t\t{strengthResult.feedback.warning}\r\n\t\t\t\t\t</Tooltip.Content>\r\n\t\t\t\t</Tooltip.Root>\r\n\t\t\t{/if}\r\n\t\t</div>\r\n\t</div>\r\n{/if}\r\n",
			"type": "registry:file",
			"target": "password-input/password-input-strength-checker.svelte"
		},
		{
			"content": "<script lang=\"ts\">\r\n\timport { type WithElementRef } from '$UTILS$';\r\n\timport { EyeIcon, EyeOffIcon } from '@lucide/svelte';\r\n\timport * as InputGroup from '$lib/components/ui/input-group';\r\n\timport type { HTMLInputAttributes } from 'svelte/elements';\r\n\timport PasswordInputStrengthChecker from './password-input-strength-checker.svelte';\r\n\r\n\texport type PasswordInputProps = { variant?: 'default' | 'strength' } & WithElementRef<\r\n\t\tOmit<HTMLInputAttributes, 'type' | 'files'>\r\n\t>;\r\n\r\n\tlet {\r\n\t\tref = $bindable(null),\r\n\t\tvalue = $bindable(''),\r\n\t\tvariant = 'default',\r\n\t\tchildren,\r\n\t\t...props\r\n\t}: PasswordInputProps = $props();\r\n\r\n\tlet showPassword = $state(false);\r\n\tconst Icon = $derived(showPassword ? EyeOffIcon : EyeIcon);\r\n</script>\r\n\r\n<div class=\"space-y-3\">\r\n\t<InputGroup.Root>\r\n\t\t<InputGroup.Input {...props} bind:ref bind:value type={showPassword ? 'text' : 'password'} />\r\n\t\t<InputGroup.Addon align=\"inline-end\">\r\n\t\t\t<InputGroup.Button size=\"icon-xs\" onclick={() => (showPassword = !showPassword)}>\r\n\t\t\t\t<Icon class=\"size-4.5\" />\r\n\t\t\t\t<span class=\"sr-only\">\r\n\t\t\t\t\t{#if showPassword}\r\n\t\t\t\t\t\tHide password\r\n\t\t\t\t\t{:else}\r\n\t\t\t\t\t\tShow password\r\n\t\t\t\t\t{/if}\r\n\t\t\t\t</span>\r\n\t\t\t</InputGroup.Button>\r\n\t\t</InputGroup.Addon>\r\n\t</InputGroup.Root>\r\n\t{#if variant === 'strength'}\r\n\t\t<PasswordInputStrengthChecker password={value} />\r\n\t{:else}\r\n\t\t{@render children?.()}\r\n\t{/if}\r\n</div>\r\n",
			"type": "registry:file",
			"target": "password-input/password-input.svelte"
		}
	]
}